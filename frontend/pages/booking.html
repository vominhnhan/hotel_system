<!--
=========================================================
* Material Dashboard 3 - v3.2.0
=========================================================

* Product Page: https://www.creative-tim.com/product/material-dashboard
* Copyright 2024 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <title>
    Material Dashboard 3 by Creative Tim
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,900" />
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/material-dashboard.css?v=3.2.0" rel="stylesheet" />
</head>

<body class="g-sidenav-show bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-radius-lg fixed-start ms-2  bg-white my-2"
    id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-dark opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
        aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand px-4 py-3 m-0" href=" https://demos.creative-tim.com/material-dashboard/pages/dashboard "
        target="_blank">
        <img src="../assets/img/logo-ct-dark.png" class="navbar-brand-img" width="26" height="26" alt="main_logo">
        <span class="ms-1 text-sm text-dark">Creative Tim</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0 mb-2">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <!-- Quản lý (Dropdown menu) -->
      <li class="nav-item" id="manager-section">
        <a class="nav-link active bg-gradient-dark text-white" href="#" data-bs-toggle="collapse" data-bs-target="#managementMenu" aria-expanded="true">
          <i class="material-symbols-rounded opacity-5">dashboard</i>
          <span class="nav-link-text ms-1">Quản lý</span>
        </a>
        <!-- Submenu Quản lý -->
        <div class="collapse show" id="managementMenu">
          <ul class="navbar-nav ps-4">
            <li class="nav-item">
              <a class="nav-link text-dark" href="../pages/dashboard.html">
                <i class="material-symbols-rounded opacity-5">table_view</i>
                <span class="nav-link-text ms-1">Thống kê</span>
              </a>
            </li>
          </ul>
        </div>
      </li>
         
        <li class="nav-item">
          <a class="nav-link active bg-gradient-dark text-white" href="../pages/booking.html">
            <i class="material-symbols-rounded opacity-5">format_textdirection_r_to_l</i>
            <span class="nav-link-text ms-1">Booking</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="../pages/services.html">
            <i class="material-symbols-rounded opacity-5">receipt_long</i>
            <span class="nav-link-text ms-1">Dịch vụ</span>
          </a>
        </li>
        
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs text-dark font-weight-bolder opacity-5">Account pages</h6>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="../pages/profile.html">
            <i class="material-symbols-rounded opacity-5">person</i>
            <span class="nav-link-text ms-1">Profile</span>
          </a>
        </li>
      </ul>
    </div>
    <div class="sidenav-footer position-absolute w-100 bottom-0 ">
      <div class="mx-3">
        <a class="btn btn-outline-dark mt-4 w-100"
          href="https://www.creative-tim.com/learning-lab/bootstrap/overview/material-dashboard?ref=sidebarfree"
          type="button">Documentation</a>
        <a class="btn bg-gradient-dark w-100"
          href="https://www.creative-tim.com/product/material-dashboard-pro?ref=sidebarfree" type="button">Upgrade to
          pro</a>
      </div>
    </div>
  </aside>
  <div class="main-content position-relative max-height-vh-100 h-100">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-3 shadow-none border-radius-xl" id="navbarBlur"
      data-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="javascript:;">Pages</a></li>
            <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Profile</li>
          </ol>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <div class="input-group input-group-outline">
              <label class="form-label">Type here...</label>
              <input type="text" class="form-control">
            </div>
          </div>
          <ul class="navbar-nav d-flex align-items-center  justify-content-end">
            <li class="nav-item d-flex align-items-center">
              <a class="btn btn-outline-primary btn-sm mb-0 me-3" target="_blank"
                href="https://www.creative-tim.com/builder?ref=navbar-material-dashboard">Online Builder</a>
            </li>
            <li class="mt-1">
              <a class="github-button" href="https://github.com/creativetimofficial/material-dashboard"
                data-icon="octicon-star" data-size="large" data-show-count="true"
                aria-label="Star creativetimofficial/material-dashboard on GitHub">Star</a>
            </li>
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                </div>
              </a>
            </li>
            <li class="nav-item px-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0">
                <i class="material-symbols-rounded fixed-plugin-button-nav">settings</i>
              </a>
            </li>
            <li class="nav-item dropdown pe-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="dropdownMenuButton" data-bs-toggle="dropdown"
                aria-expanded="false">
                <i class="material-symbols-rounded">notifications</i>
              </a>
              <ul class="dropdown-menu  dropdown-menu-end  px-2 py-3 me-sm-n4" aria-labelledby="dropdownMenuButton">
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src="../assets/img/team-2.jpg" class="avatar avatar-sm  me-3 ">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold">New message</span> from Laur
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          13 minutes ago
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src="../assets/img/small-logos/logo-spotify.svg"
                          class="avatar avatar-sm bg-gradient-dark  me-3 ">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold">New album</span> by Travis Scott
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          1 day
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="avatar avatar-sm bg-gradient-secondary  me-3  my-auto">
                        <svg width="12px" height="12px" viewBox="0 0 43 36" version="1.1"
                          xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                          <title>credit-card</title>
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-2169.000000, -745.000000)" fill="#FFFFFF" fill-rule="nonzero">
                              <g transform="translate(1716.000000, 291.000000)">
                                <g transform="translate(453.000000, 454.000000)">
                                  <path class="color-background"
                                    d="M43,10.7482083 L43,3.58333333 C43,1.60354167 41.3964583,0 39.4166667,0 L3.58333333,0 C1.60354167,0 0,1.60354167 0,3.58333333 L0,10.7482083 L43,10.7482083 Z"
                                    opacity="0.593633743"></path>
                                  <path class="color-background"
                                    d="M0,16.125 L0,32.25 C0,34.2297917 1.60354167,35.8333333 3.58333333,35.8333333 L39.4166667,35.8333333 C41.3964583,35.8333333 43,34.2297917 43,32.25 L43,16.125 L0,16.125 Z M19.7083333,26.875 L7.16666667,26.875 L7.16666667,23.2916667 L19.7083333,23.2916667 L19.7083333,26.875 Z M35.8333333,26.875 L28.6666667,26.875 L28.6666667,23.2916667 L35.8333333,23.2916667 L35.8333333,26.875 Z">
                                  </path>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          Payment successfully completed
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          2 days
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
            <li class="nav-item d-flex align-items-center">
              <a href="../pages/sign-in.html" class="nav-link text-body font-weight-bold px-0">
                <i class="material-symbols-rounded">account_circle</i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <style>
      body {
        background-color: #f0f2f5; /* Slightly darker background to differentiate from cards */
      }
      .card {
        border-radius: 10px;
        overflow: hidden;
        transition: all 0.3s ease;
        border: 1px solid #e0e0e0; /* Added border to make cards stand out */
        position: relative;
      }
      .card.khach-le {
        background-color: #26a69a; /* Teal background for "Khách lẽ" rooms */
        color: white;
      }
      .card.khach-le .text-secondary,
      .card.khach-le .text-sm {
        color: white !important;
      }
      .card.sach {
        background-color: #fafafa; /* Slightly off-white background for "Sạch" rooms to differentiate */
      }
      .badge.bg-gradient-success {
        background: #4caf50 !important;
      }
      .badge.bg-gradient-info {
        background: #26a69a !important;
      }
      .badge.bg-gradient-warning {
        background: #fb8c00 !important; /* Orange for "Chưa dọn" */
      }
      .text-sm i {
        color: #666;
      }
      .card-body {
        padding: 1rem !important;
      }
      .card h6 {
        font-size: 1.1rem;
        font-weight: bold;
      }
      .text-sm {
        font-size: 0.85rem;
        line-height: 1.2;
      }
      .modal-content {
        border-radius: 10px;
      }
      .modal-header {
        background-color: #e9ecef;
      }
      .btn-custom {
        background-color: #4caf50;
        color: white;
        border: none;
      }
      .btn-custom:hover {
        background-color: #45a049;
      }
      .status-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px 10px;
        background-color: #f5f5f5; /* Light background for the status row */
      }
      .status-row .badge {
        font-size: 0.75rem;
      }
      .status-row .dots {
        cursor: pointer;
        font-size: 1rem;
        color: #666;
      }
      .price-icons i {
        margin-right: 5px;
      }
    </style>
    
    <div class="container-fluid px-2 px-md-4">
      <div class="card card-body mx-2 mx-md-2 mt-4">
        <div class="row">
          <div class="col-12 mt-4">
            <div class="mb-5 ps-3">
              <h6 class="mb-1">Đặt phòng</h6>
              <p class="text-sm">Chọn phòng khách sạn</p>
            </div>
    
            <!-- Floor selector and search -->
            <div class="col-12 d-flex justify-content-between mt-4">
              
    
              <!-- Search bar -->
              <div class="input-group input-group-outline w-50">
                <input type="text" class="form-control" placeholder="Tìm kiếm khách hàng, mã đặt phòng..." aria-label="Search">
              </div>
    
            </div>

            <!-- Filter buttons -->
            <div id="filter-buttons" class="mb-3">
              <button id="filter-available" class="btn btn-outline-primary me-2">Đang trống (0)</button>
              <button id="filter-occupied" class="btn btn-outline-success me-2">Đang sử dụng (0)</button>
            </div>
            
            
    
            <!-- Room cards -->
            <div class="row mt-4">
              
            </div>

    
            <!-- Pagination -->
            <div class="d-flex justify-content-center mt-4">
              <nav aria-label="Page navigation">
                <ul class="pagination">
                  <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true"><</a>
                  </li>
                  <li class="page-item active"><a class="page-link" href="#">1</a></li>
                  <li class="page-item">
                    <a class="page-link" href="#">></a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    
      <!-- Modal Check In-->
      <div class="modal fade" id="roomModal" tabindex="-1" aria-labelledby="roomModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="roomModalLabel">Đặt/Nhận phòng nhanh</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-12">
                  <div class="input-group input-group-static mb-3">
                    <label>Hạng phòng</label>
                    <select class="form-control" id="roomSelect">
                      <!-- <option value="P.201">Phòng 01 giờ đồng đếm cho 2 người - P.201</option>
                      <option value="P.202">Phòng 01 giờ đồng đếm cho 2 người - P.202</option>
                      <option value="P.203">Phòng 01 giờ đồng đếm cho 2 người - P.203</option>
                      <option value="P.301">Phòng 01 giờ đồng đếm cho 2 người - P.301</option>
                      <option value="P.302">Phòng 01 giờ đồng đếm - P.302</option> -->
                    </select>
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Tên khách hàng</label>
                    <input type="text" class="form-control" id="customerName" placeholder="Nguyễn Văn A">
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Số điện thoại</label>
                    <input type="tel" class="form-control" id="customerPhone" placeholder="090xxxxxxx">
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Số CCCD</label>
                    <input type="tel" class="form-control" id="customerID" placeholder="xxxxxxxxxx">
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Email</label>
                    <input type="text" class="form-control" id="customerEmail" placeholder="abc123@gmail.com">
                  </div>
                </div>
                <div class="col-12">
                  <div class="input-group input-group-static mb-3">
                    <label>Ghi chú</label>
                    <textarea class="form-control" id="customerNote" rows="2" placeholder="Yêu cầu đặc biệt..."></textarea>
                  </div>
                </div>
                
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Nhận phòng</label>
                    <input type="datetime-local" class="form-control" id="checkInTime" value="2025-05-04T19:36">
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Trả phòng</label>
                    <input type="datetime-local" class="form-control" id="checkOutTime" value="2025-05-04T20:36">
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Hình thức</label>
                    <select class="form-control" id="rentalType">
                      <option value="hourly">Thuê theo giờ</option>
                      <option value="overnight">Thuê qua đêm</option>
                      <option value="daily">Thuê theo ngày</option>
                    </select>
                  </div>
                </div>
                
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Giá</label>
                    <input type="text" class="form-control" id="price" value="180,000" readonly>
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Khách cần trả</label>
                    <input type="text" class="form-control" id="amountToPay" value="180,000">
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group input-group-static mb-3">
                    <label>Khách thanh toán</label>
                    <input type="text" class="form-control" id="paymentAmount" value="0">
                  </div>
                </div>
                <div class="col-12 text-end">
                  <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Hủy</button>
                  <button type="button" class="btn btn-custom" id="bookRoom">Nhận phòng</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
      <!-- Modal Check Out -->
      <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="max-width: 720px">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="checkoutModalLabel">Chi tiết P.202</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="border rounded p-3 mb-4">
                <h6><strong>Phòng 01 giường đôi cho 2 người</strong> <span class="badge bg-success ms-2">Đang sử dụng</span> <i class="ms-1 text-success bi bi-cash"></i></h6>
                <div class="row mt-3">
                  <div class="col-sm-6">
                    <p><strong>Khách hàng</strong><br>Khách lẻ</p>
                  </div>
                  <div class="col-sm-6">
                    <p><strong>Khách lưu trú</strong><br>0 người lớn, 0 trẻ em, 0 giấy tờ</p>
                  </div>
                  <div class="col-sm-6">
                    <p><strong>Mã đặt phòng</strong><br>DP000002</p>
                  </div>
                  <div class="col-sm-6">
                    <p><strong>Nhận phòng</strong><br>05 Thg 05, 09:27</p>
                  </div>
                  <div class="col-sm-6">
                    <p><strong>Trả phòng</strong><br>05 Thg 05, 21:27</p>
                  </div>
                  <div class="col-sm-6">
                    <p><strong>Thời gian lưu trú</strong><br>12 giờ <span class="badge bg-light text-dark">Đã sử dụng: 38 giờ 7 phút</span></p>
                  </div>
                </div>
              </div>
              <div class="row align-items-center">
                <div class="col-6">
                  <p class="mb-1"><strong>P.202</strong></p>
                  <h5 class="mb-0">2,160,000</h5>
                </div>
                <div class="col-6 text-end">
                  <p class="mb-1 text-muted">Khách đã trả</p>
                  <h5 class="mb-0">0</h5>
                </div>
              </div>
              <hr>
              <div class="text-end">
                <button class="btn btn-success" id="checkoutBtn">Trả phòng</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="offcanvas offcanvas-end" id="checkoutDetails">
        <div class="offcanvas-header">
          <h5>Kiểm tra trước khi check-out - P.502</h5>
        </div>
        <div class="offcanvas-body">
          <h6>Minibar đã dùng</h6>
          <!-- Duyệt qua minibar -->
          <div class="row">
            <div class="col-6">Bia Hà Nội</div>
            <div class="col-6"><input type="number" min="0" class="form-control" name="minibar[1]"></div>
          </div>
      
          <h6>CSVC hư hỏng / thiếu</h6>
          <!-- Duyệt qua CSVC -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="5" id="tvHỏng">
            <label class="form-check-label" for="tvHỏng">
              Tivi - bị hỏng
            </label>
          </div>
      
          <div class="mb-3 mt-3">
            <label for="note">Ghi chú</label>
            <textarea class="form-control" id="note"></textarea>
          </div>
      
          <button class="btn btn-success" onclick="submitCheckout()">Xác nhận check-out</button>
        </div>
      </div>
      
      

      <!-- Payment Modal for Check-in/Check-out -->
      <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" style="margin-left:auto; margin-right:0;">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Thanh toán DP000021 - Khách lẻ</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-md-8">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>STT</th>
                        <th>Hạng mục</th>
                        <th>Số lượng</th>
                        <th>Đơn giá</th>
                        <th>Thành tiền</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>1</td>
                        <td>Phòng 01 giường đôi cho 2 người</td>
                        <td id="durationHours">1 giờ</td>
                        <td id="unitPrice">180,000</td>
                        <td><strong id="totalPrice">180,000</strong></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="col-md-4">
                  <div class="mb-2">
                    <label class="form-label">Nhân viên tạo HD</label>
                    <select class="form-select">
                      <option selected>hao222</option>
                    </select>
                  </div>
                  <div class="mb-2">
                    <label class="form-label">Phòng</label>
                    <select class="form-select" id="roomSelector">
                      <option>P.201</option>
                      <option selected>P.202</option>
                      <option>P.203</option>
                    </select>
                  </div>
                  <div class="mb-2">
                    <label class="form-label">Thời gian tạo HD</label>
                    <input type="datetime-local" class="form-control" value="2025-05-06T23:24">
                  </div>
                  <hr>
                  <div class="border-top border-bottom py-2 mb-3">
                    <p class="mb-1">Tổng cộng: <strong id="grandTotal">180,000</strong></p>
                    <p class="mb-1">Giảm giá: <strong>0</strong></p>
                    <p class="mb-1">Thu khác: <strong>0</strong></p>
                    <p class="mb-0">Còn cần trả: <strong class="text-success" id="remainingAmount">180,000</strong></p>
                  </div>
                  <hr>
                  <div class="mb-3">
                    <h6>Phương thức thanh toán</h6>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <div class="form-check me-3">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="cash" checked>
                        <label class="form-check-label" for="cash">Tiền mặt</label>
                      </div>
                      <div class="form-check me-3">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="bank">
                        <label class="form-check-label" for="bank">Chuyển khoản</label>
                      </div>
                    </div>
                    <div class="bg-light rounded p-3">
                      <div class="d-flex justify-content-between align-items-center mb-3">
                        <span>Khách thanh toán</span>
                        <input id="customerPayment" type="text" class="form-control form-control-sm w-50 text-end fw-bold" value="0">
                      </div>
                      <div class="border-top pt-2">
                        <span class="text-muted">Tiền thừa trả khách</span>
                        <h5 class="text-success mb-0" id="changeDue">-180,000</h5>
                      </div>
                    </div>
                  </div>
                  <div>
                    <button class="btn btn-success w-100" id="completePayment">Hoàn thành</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      
    <footer class="footer py-4  ">
      <div class="container-fluid">
        <div class="row align-items-center justify-content-lg-between">
          <div class="col-lg-6 mb-lg-0 mb-4">
            <div class="copyright text-center text-sm text-muted text-lg-start">
              ©
              <script>
                document.write(new Date().getFullYear())
              </script>,
              made with <i class="fa fa-heart"></i> by
              <a href="https://www.creative-tim.com" class="font-weight-bold" target="_blank">Creative Tim</a>
              for a better web.
            </div>
          </div>
          <div class="col-lg-6">
            <ul class="nav nav-footer justify-content-center justify-content-lg-end">
              <li class="nav-item">
                <a href="https://www.creative-tim.com" class="nav-link text-muted" target="_blank">Creative Tim</a>
              </li>
              <li class="nav-item">
                <a href="https://www.creative-tim.com/presentation" class="nav-link text-muted" target="_blank">About
                  Us</a>
              </li>
              <li class="nav-item">
                <a href="https://www.creative-tim.com/blog" class="nav-link text-muted" target="_blank">Blog</a>
              </li>
              <li class="nav-item">
                <a href="https://www.creative-tim.com/license" class="nav-link pe-0 text-muted"
                  target="_blank">License</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
  </div>
  <div class="fixed-plugin">
    <a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
      <i class="material-symbols-rounded py-2">settings</i>
    </a>
    <div class="card shadow-lg">
      <div class="card-header pb-0 pt-3">
        <div class="float-start">
          <h5 class="mt-3 mb-0">Material UI Configurator</h5>
          <p>See our dashboard options.</p>
        </div>
        <div class="float-end mt-4">
          <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
            <i class="material-symbols-rounded">clear</i>
          </button>
        </div>
        <!-- End Toggle Button -->
      </div>
      <hr class="horizontal dark my-1">
      <div class="card-body pt-sm-3 pt-0">
        <!-- Sidebar Backgrounds -->
        <div>
          <h6 class="mb-0">Sidebar Colors</h6>
        </div>
        <a href="javascript:void(0)" class="switch-trigger background-color">
          <div class="badge-colors my-2 text-start">
            <span class="badge filter bg-gradient-primary" data-color="primary" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-dark active" data-color="dark" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-success" data-color="success" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-warning" data-color="warning" onclick="sidebarColor(this)"></span>
            <span class="badge filter bg-gradient-danger" data-color="danger" onclick="sidebarColor(this)"></span>
          </div>
        </a>
        <!-- Sidenav Type -->
        <div class="mt-3">
          <h6 class="mb-0">Sidenav Type</h6>
          <p class="text-sm">Choose between different sidenav types.</p>
        </div>
        <div class="d-flex">
          <button class="btn bg-gradient-dark px-3 mb-2" data-class="bg-gradient-dark"
            onclick="sidebarType(this)">Dark</button>
          <button class="btn bg-gradient-dark px-3 mb-2 ms-2" data-class="bg-transparent"
            onclick="sidebarType(this)">Transparent</button>
          <button class="btn bg-gradient-dark px-3 mb-2  active ms-2" data-class="bg-white"
            onclick="sidebarType(this)">White</button>
        </div>
        <p class="text-sm d-xl-none d-block mt-2">You can change the sidenav type just on desktop view.</p>
        <!-- Navbar Fixed -->
        <div class="mt-3 d-flex">
          <h6 class="mb-0">Navbar Fixed</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed" onclick="navbarFixed(this)">
          </div>
        </div>
        <hr class="horizontal dark my-3">
        <div class="mt-2 d-flex">
          <h6 class="mb-0">Light / Dark</h6>
          <div class="form-check form-switch ps-0 ms-auto my-auto">
            <input class="form-check-input mt-1 ms-auto" type="checkbox" id="dark-version" onclick="darkMode(this)">
          </div>
        </div>
        <hr class="horizontal dark my-sm-4">
        <a class="btn bg-gradient-info w-100" href="https://www.creative-tim.com/product/material-dashboard-pro">Free
          Download</a>
        <a class="btn btn-outline-dark w-100"
          href="https://www.creative-tim.com/learning-lab/bootstrap/overview/material-dashboard">View documentation</a>
        <div class="w-100 text-center">
          <a class="github-button" href="https://github.com/creativetimofficial/material-dashboard"
            data-icon="octicon-star" data-size="large" data-show-count="true"
            aria-label="Star creativetimofficial/material-dashboard on GitHub">Star</a>
          <h6 class="mt-3">Thank you for sharing!</h6>
          <a href="https://twitter.com/intent/tweet?text=Check%20Material%20UI%20Dashboard%20made%20by%20%40CreativeTim%20%23webdesign%20%23dashboard%20%23bootstrap5&amp;url=https%3A%2F%2Fwww.creative-tim.com%2Fproduct%2Fsoft-ui-dashboard"
            class="btn btn-dark mb-0 me-2" target="_blank">
            <i class="fab fa-twitter me-1" aria-hidden="true"></i> Tweet
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.creative-tim.com/product/material-dashboard"
            class="btn btn-dark mb-0 me-2" target="_blank">
            <i class="fab fa-facebook-square me-1" aria-hidden="true"></i> Share
          </a>
        </div>
      </div>
    </div>
  </div>
  <!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/material-dashboard.min.js?v=3.2.0"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const roomModal = document.getElementById('roomModal');
      const roomSelect = document.getElementById('roomSelect');
      const priceField = document.getElementById('price');
      const amountField = document.getElementById('amountToPay');
      const modalTitle = document.getElementById('roomModalLabel');
      const rentalType = document.getElementById('rentalType');
      const checkInTime = document.getElementById('checkInTime');
      const checkOutTime = document.getElementById('checkOutTime');
    
      let allRoomsData = [];
    
      // Function tính giá
      function updateDuration() {
        const selectedRoom = allRoomsData.find(room => room.name === roomSelect.value);
        if (!selectedRoom) return;
      
        const checkIn = new Date(checkInTime.value);
        const checkOut = new Date(checkOutTime.value);
        const diffMs = checkOut - checkIn;
        const diffHours = Math.ceil(diffMs / (1000 * 60 * 60));
        const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24)); // Làm tròn lên cho mỗi ngày
      
        const rental = rentalType.value;
        let basePrice = 0;
        let totalPrice = 0;
      
        if (rental === 'hourly') {
          basePrice = selectedRoom.hourly_price;
          totalPrice = basePrice * diffHours;
        } else if (rental === 'overnight') {
          basePrice = selectedRoom.overnight_price;
          // Mỗi 24h xem như là 1 đêm
          const nights = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
          totalPrice = basePrice * nights;
        } else if (rental === 'daily') {
          basePrice = selectedRoom.daily_price;
          totalPrice = basePrice * diffDays;
        }
      
        priceField.value = basePrice.toLocaleString();
        amountField.value = totalPrice.toLocaleString();
      }
      
    
      // Khi fetch xong room
      fetchWithAuth("http://localhost:3003/api/rooms")
        .then(response => response.json())
        .then(rooms => {
          allRoomsData = rooms;
        });
    
      // Khi mở modal
      roomModal.addEventListener('show.bs.modal', function (event) {
        const button = event.relatedTarget;
        const roomName = button.getAttribute('data-room');
    
        modalTitle.textContent = `Đặt/Nhận phòng nhanh - ${roomName}`;
        roomSelect.value = roomName;
    
        updateDuration(); // Giá đúng khi mở
      });
    
      // ✅ Các event thay đổi sẽ cập nhật giá ngay
      rentalType.addEventListener('change', updateDuration);
      checkInTime.addEventListener('change', updateDuration);
      checkOutTime.addEventListener('change', updateDuration);
      roomSelect.addEventListener('change', updateDuration);
    });
    
    
    
    

      // Simple duration and price update (basic logic)
      const checkInTime = document.getElementById('checkInTime');
      const checkOutTime = document.getElementById('checkOutTime');
      const duration = document.getElementById('duration');
      const price = document.getElementById('price');
      const amountToPay = document.getElementById('amountToPay');

      function updateDuration() {
        const checkIn = new Date(checkInTime.value);
        const checkOut = new Date(checkOutTime.value);
        const diffMs = checkOut - checkIn;
        const diffHours = Math.max(Math.floor(diffMs / (1000 * 60 * 60)), 1);
      
        const rentalType = document.getElementById('rentalType').value;
        const selectedRoom = allRoomsData.find(room => room.name === roomSelect.value);
      
        let basePrice = 0;
        if (!selectedRoom) return;
      
        if (rentalType === 'hourly') {
          basePrice = selectedRoom.hourly_price;
        } else if (rentalType === 'overnight') {
          basePrice = selectedRoom.overnight_price;
        } else if (rentalType === 'daily') {
          basePrice = selectedRoom.daily_price;
        }
      
        let totalPrice = basePrice;
        if (rentalType === 'hourly') {
          totalPrice = diffHours * basePrice;
        }
      
        price.value = basePrice.toLocaleString();
        amountToPay.value = totalPrice.toLocaleString();
      }
      
      

      checkInTime.addEventListener('change', updateDuration);
      checkOutTime.addEventListener('change', updateDuration);
    ;
    document.getElementById('rentalType').addEventListener('change', updateDuration);
    roomSelect.addEventListener('change', updateDuration); // Nếu user đổi phòng
    
    function toggleRoomStatus(roomId) {
      const statusElement = document.querySelector(`.position-absolute .toggle-status[data-room="${roomId}"]`);
      if (!statusElement) {
        const badgeElement = document.querySelector(`.position-absolute .badge[data-room="${roomId}"]`);
        if (badgeElement && badgeElement.textContent === 'Sạch') {
          badgeElement.textContent = 'Chưa dọn';
          badgeElement.classList.remove('bg-gradient-success');
          badgeElement.classList.add('bg-gradient-warning');
        } else if (badgeElement && badgeElement.textContent === 'Chưa dọn') {
          badgeElement.textContent = 'Sạch';
          badgeElement.classList.remove('bg-gradient-warning');
          badgeElement.classList.add('bg-gradient-success');
        }
      }
    }
  
    function toggleCleaningStatus(roomId) {
      const statusElement = document.querySelector(`.cleaning-status[data-room="${roomId}"]`);
      if (statusElement.textContent === 'Sạch') {
        statusElement.textContent = 'Chưa dọn';
        statusElement.classList.remove('bg-gradient-success');
        statusElement.classList.add('bg-gradient-warning');
      } else {
        statusElement.textContent = 'Sạch';
        statusElement.classList.remove('bg-gradient-warning');
        statusElement.classList.add('bg-gradient-success');
      }
    }

    document.getElementById('bookRoom').addEventListener('click', function () {
      const name = document.getElementById('customerName').value;
      const phone = document.getElementById('customerPhone').value;
      const note = document.getElementById('customerNote').value;
      const ID = document.getElementById('customerID').value;
      const Email = document.getElementById('customerEmail').value;
      
      // ✅ Truyền sang modal thanh toán
      document.querySelector('.modal-title').innerText = `Thanh toán - ${name}`;
      document.getElementById('roomSelector').value = document.getElementById('roomSelect').value;
    
      const rentalType = document.getElementById('rentalType').value;
      const duration = getRentalDuration(rentalType); // bạn sẽ tạo hàm này phía dưới
      const unitPrice = document.getElementById('price').value;
      const totalPrice = document.getElementById('amountToPay').value;
    
      // Gán vào các thẻ trong paymentModal
      document.getElementById('durationHours').innerText = duration;
      document.getElementById('unitPrice').innerText = unitPrice;
      document.getElementById('totalPrice').innerText = totalPrice;
      document.getElementById('grandTotal').innerText = totalPrice;
      document.getElementById('remainingAmount').innerText = totalPrice;
      document.getElementById('changeDue').innerText = `-${totalPrice}`;
    
      // Hiện modal thanh toán
      const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
      paymentModal.show();
    });
    
    function getRentalDuration(type) {
      const checkIn = new Date(document.getElementById('checkInTime').value);
      const checkOut = new Date(document.getElementById('checkOutTime').value);
      const diffMs = checkOut - checkIn;
    
      if (type === 'hourly') {
        const hours = Math.ceil(diffMs / (1000 * 60 * 60));
        return `${hours} giờ`;
      } else if (type === 'overnight') {
        const nights = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
        return `${nights} đêm`;
      } else if (type === 'daily') {
        const days = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
        return `${days} ngày`;
      }
      return '';
    }
    

    document.getElementById('checkoutBtn').addEventListener('click', function () {
      const checkoutModal = bootstrap.Modal.getInstance(document.getElementById('checkoutModal'));
      if (checkoutModal) checkoutModal.hide(); // Ẩn modal hiện tại
  
      const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
      paymentModal.show(); // Hiện modal thanh toán
    });
  </script>
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      if (!token) return;
  
      try {
        const payloadBase64 = token.split('.')[1];
        const decoded = JSON.parse(atob(payloadBase64));
        const role = decoded.role;
  
        // Ẩn mục "Quản lý" nếu không phải MANAGER
        if (role !== "MANAGER") {
          const managerSection = document.getElementById("manager-section");
          if (managerSection) {
            managerSection.style.display = "none";
          }
        }
  
      } catch (err) {
        console.error("Token không hợp lệ", err);
      }
    });
  </script>
  
  <!-- Fetch and display room data -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetchWithAuth("http://localhost:3003/api/rooms") // Thay bằng domain thật nếu deploy
        .then(response => response.json())
        .then(rooms => {
          const container = document.querySelector(".row.mt-4"); // nơi chứa card phòng
          container.innerHTML = ""; // Clear phòng mẫu cũ (nếu có)
    
          rooms.forEach(room => {
            const isOccupied = room.status === "OCCUPIED";
            const isCleaned = room.is_cleaned;
    
            const cardClass = isOccupied ? "khach-le" : "sach";
            const cleaningBadge = isCleaned
              ? `<span class="badge bg-gradient-success cleaning-status" data-room="${room.name}">Sạch</span>`
              : `<span class="badge bg-gradient-warning cleaning-status" data-room="${room.name}">Chưa dọn</span>`;
    
            const statusCard = `
              <div class="col-3 mb-4">
                <div class="status-row">
                  ${cleaningBadge}
                  <span class="dots" onclick="toggleCleaningStatus('${room.name}', event)">⋮</span>
                </div>
                <div class="card card-blog card-plain position-relative ${cardClass}" data-bs-toggle="modal"
                  data-bs-target="${isOccupied ? '#checkoutModal' : '#roomModal'}" data-room="${room.name}">
                  <div class="card-body p-3">
                    <h6 class="mb-1">${room.name}</h6>
                    ${isOccupied ? `<span class="badge bg-gradient-info">Khách lẻ</span>` : ""}
                    <p class="text-sm text-secondary mb-1">${room.description}</p>
                    ${!isOccupied
                      ? `<p class="mb-2 text-sm price-icons">
                          <i class="fas fa-clock"></i> ${room.hourly_price.toLocaleString()}<br>
                          <i class="fas fa-moon"></i> ${room.overnight_price.toLocaleString()}<br>
                          <i class="fas fa-calendar-day"></i> ${room.daily_price.toLocaleString()}
                        </p>`
                      : ""}
                  </div>
                </div>
              </div>
            `;
    
            container.insertAdjacentHTML("beforeend", statusCard);
          });
        })
        .catch(err => console.error("Lỗi khi tải phòng:", err));
    });
    </script>
    
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const container = document.querySelector(".row.mt-4");
        const btnAvailable = document.getElementById("filter-available");
        const btnOccupied = document.getElementById("filter-occupied");
        let allRooms = [];
        let currentFilter = null; // null | 'AVAILABLE' | 'OCCUPIED'
      
        function renderRooms(rooms) {
          container.innerHTML = "";
          rooms.forEach(room => {
            const isOccupied = room.status === "OCCUPIED";
            const isCleaned = room.is_cleaned;
      
            const cardClass = isOccupied ? "khach-le" : "sach";
            const cleaningBadge = isCleaned
              ? `<span class="badge bg-gradient-success cleaning-status" data-room="${room.name}">Sạch</span>`
              : `<span class="badge bg-gradient-warning cleaning-status" data-room="${room.name}">Chưa dọn</span>`;
      
            const cardHtml = `
              <div class="col-3 mb-4">
                <div class="status-row">
                  ${cleaningBadge}
                  <span class="dots" onclick="toggleCleaningStatus('${room.name}', event)">⋮</span>
                </div>
                <div class="card card-blog card-plain position-relative ${cardClass}" data-bs-toggle="offcanvas"
                  data-bs-target="${isOccupied ? '#checkoutDetails' : '#roomModal'}" data-room="${room.name}">
                  <div class="card-body p-3">
                    <h6 class="mb-1">${room.name}</h6>
                    ${isOccupied ? `<span class="badge bg-gradient-info">Khách lẻ</span>` : ""}
                    <p class="text-sm text-secondary mb-1">${room.description}</p>
                    ${!isOccupied
                      ? `<p class="mb-2 text-sm price-icons">
                          <i class="fas fa-clock"></i> ${room.hourly_price.toLocaleString()}<br>
                          <i class="fas fa-moon"></i> ${room.overnight_price.toLocaleString()}<br>
                          <i class="fas fa-calendar-day"></i> ${room.daily_price.toLocaleString()}
                        </p>`
                      : ""}
                  </div>
                </div>
              </div>
            `;
            container.insertAdjacentHTML("beforeend", cardHtml);
          });
        }
      
        const roomSelect = document.getElementById('roomSelect');

        fetchWithAuth("http://localhost:3003/api/rooms")
        .then(response => response.json())
        .then(rooms => {
          const availableRooms = rooms.filter(room => room.status === "AVAILABLE");

          // Clear and add available rooms to select
          roomSelect.innerHTML = '';
          availableRooms.forEach(room => {
            const option = document.createElement("option");
            option.value = room.name;
            option.textContent = `${room.description} - ${room.name}`;
            roomSelect.appendChild(option);
          });

          // Nếu có phòng thì gán giá trị đầu tiên cho modal
          if (availableRooms.length > 0) {
            roomSelect.value = availableRooms[0].name;

            // Gọi hàm cập nhật giá (nếu có)
            const evt = new CustomEvent('room-select-init', { detail: availableRooms[0] });
            roomSelect.dispatchEvent(evt);
          }
        });

        function updateFilterCounts(rooms) {
          const available = rooms.filter(r => r.status === "AVAILABLE").length;
          const occupied = rooms.filter(r => r.status === "OCCUPIED").length;
      
          btnAvailable.innerHTML = `Đang trống (${available})`;
          btnOccupied.innerHTML = `Đang sử dụng (${occupied})`;
        }
      
        function applyFilter(filter) {
          if (currentFilter === filter) {
            // Hủy filter
            currentFilter = null;
            btnAvailable.classList.remove("btn-primary");
            btnAvailable.classList.add("btn-outline-primary");
            btnOccupied.classList.remove("btn-success");
            btnOccupied.classList.add("btn-outline-success");
            renderRooms(allRooms);
          } else {
            currentFilter = filter;
            const filtered = allRooms.filter(r => r.status === filter);
      
            if (filter === "AVAILABLE") {
              btnAvailable.classList.remove("btn-outline-primary");
              btnAvailable.classList.add("btn-primary");
              btnOccupied.classList.remove("btn-success");
              btnOccupied.classList.add("btn-outline-success");
            } else {
              btnOccupied.classList.remove("btn-outline-success");
              btnOccupied.classList.add("btn-success");
              btnAvailable.classList.remove("btn-primary");
              btnAvailable.classList.add("btn-outline-primary");
            }
      
            renderRooms(filtered);
          }
        }
      
        btnAvailable.addEventListener("click", () => applyFilter("AVAILABLE"));
        btnOccupied.addEventListener("click", () => applyFilter("OCCUPIED"));
      
        fetchWithAuth("http://localhost:3003/api/rooms")
          .then(response => response.json())
          .then(rooms => {
            allRooms = rooms;
            updateFilterCounts(allRooms);
            renderRooms(allRooms);
          });
      });

      function fetchWithAuth(url, options = {}) {
        const token = localStorage.getItem("token");
        if (!token) {
          alert("Bạn chưa đăng nhập hoặc token đã hết hạn!");
          window.location.href = "../pages/sign-in.html";
          return;
        }
      
        return fetch(url, {
          ...options,
          headers: {
            ...(options.headers || {}),
            "Authorization": `Bearer ${token}`
          }
        });
      }
      
      document.getElementById('customerPayment').addEventListener('input', function () {
        const customerPayment = parseCurrency(this.value);
        const remainingAmount = parseCurrency(document.getElementById('remainingAmount').innerText);
      
        const change = customerPayment - remainingAmount;
        const changeDisplay = document.getElementById('changeDue');
      
        changeDisplay.innerText = formatCurrency(change);
        changeDisplay.classList.toggle('text-danger', change < 0);
        changeDisplay.classList.toggle('text-success', change >= 0);
      });

      function parseCurrency(value) {
        return parseInt(value.replace(/[^0-9]/g, '')) || 0;
      }
      
      function formatCurrency(number) {
        return number.toLocaleString('vi-VN');
      }
      
      </script>
      
</body>

</html>